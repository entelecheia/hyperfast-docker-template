[tool.poetry]
name = "`{{ docker_project_name }}`"
version = "0.0.0"
description = "`{{ project_short_description }}`"
authors = ["`{{ author }}` <`{{ email }}`>"]
license = "`{{ project_license }}`"
repository = "https://github.com/`{{ github_username }}`/`{{ github_repo_name }}`"
readme = "README.md"

[tool.poetry.dependencies]
python = ">=3.9,<3.13"

[tool.poetry.group.dev]
optional = true

[tool.poetry.group.dev.dependencies]
python-semantic-release = "^9.12.0"

{% if poe_task_files -%}
[tool.poe]
include = `{{ poe_task_files|to_json }}`

{% endif -%}
[tool.commitizen]
name = "cz_conventional_commits"
tag_format = "v$version"

[tool.semantic_release]
# General settings
tag_format = "v{version}"
commit_parser = "angular"
major_on_zero = true
allow_zero_version = true
tag_commit = true
no_git_verify = false
version_source = "tag"
commit_version_number = true
commit_message = "{version}\n\nAutomatically generated by python-semantic-release"

# Version variables
version_toml = ["pyproject.toml:tool.poetry.version"]
{% if use_semantic_versioning_for_image -%}
version_variables = [".docker/docker.version:`{{ docker_image_version_variable_name }}`"]
{%- endif %}

# Remote settings
[tool.semantic_release.remote]
name = "origin"
type = "github"
ignore_token_for_push = false
insecure = false

# Changelog settings
[tool.semantic_release.changelog]
insertion_flag = "<!--next-version-placeholder-->"
mode = "update"

# Commit parser options
[tool.semantic_release.commit_parser_options]
allowed_tags = [
  "build",
  "chore",
  "ci",
  "docs",
  "feat",
  "fix",
  "perf",
  "style",
  "refactor",
  "test",
]
minor_tags = ["feat"]
patch_tags = ["fix", "perf"]
default_bump_level = 0

# Branch settings
[tool.semantic_release.branches.main]
match = "(main|master|release)"
prerelease_token = "rc"
prerelease = false

# Commit author settings
[tool.semantic_release.commit_author]
env = "GIT_COMMIT_AUTHOR"
default = "semantic-release <semantic-release>"

# Publish settings
[tool.semantic_release.publish]
dist_glob_patterns = ["dist/*"]
upload_to_vcs_release = false
